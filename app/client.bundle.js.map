{"version":3,"sources":["webpack:///webpack/bootstrap 2d9a2d983bf49e7353c4?e857","webpack:///./src/public/net/WS.ts","webpack:///./src/public/Client.ts","webpack:///./src/public/components/Node.ts","webpack:///external \"knockout-es5\"","webpack:///./src/public/event/EventEmitter.ts","webpack:///./src/public/components/Page.ts"],"names":[],"mappings":"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","file":"client.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2d9a2d983bf49e7353c4","import EventEmitter from '../event/EventEmitter';\n\nexport type WSEvents = 'message' | 'open' | 'close';\nexport namespace WSEvents {\n\texport const Message = 'message';\n\texport const Open = 'open';\n\texport const Close = 'close';\n}\n\nexport default class WS extends EventEmitter {\n\tpublic readonly url: string;\n\tprivate _ws: WebSocket;\n\n\tpublic constructor(url: string) {\n\t\tsuper(WSEvents.Message, WSEvents.Open, WSEvents.Close);\n\t\tthis.url = url;\n\t\tthis._ws = this.connect(this.url);\n\t}\n\n\tpublic connect(url: string): WebSocket {\n\t\ttry {\n\t\t\tconst ws = new WebSocket(url);\n\t\t\tws.onmessage = this._onMessage.bind(this);\n\t\t\tws.onopen = this._onOpen.bind(this);\n\t\t\tws.onclose = this._onClose.bind(this);\n\t\t\treturn ws;\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\tthrow new Error(err);\n\t\t}\n\t}\n\n\tpublic send(data: any): void {\n\t\tthis._ws.send(JSON.stringify(data));\n\t}\n\n\tprivate _retry(): void {\n\t\ttry {\n\t\t\tthis._ws = this.connect(this.url);\n\t\t} catch (err) {\n\t\t\tsetTimeout(this._retry.bind(this), 1000);\n\t\t}\n\t}\n\n\tprivate _onMessage(message: MessageEvent): boolean {\n\t\tthis.emit(WSEvents.Message, this, message);\n\t\treturn true;\n\t}\n\n\tprivate _onOpen(): boolean {\n\t\tthis.emit(WSEvents.Open, this);\n\t\treturn true;\n\t}\n\n\tprivate _onClose(): boolean {\n\t\tthis.emit(WSEvents.Close, this);\n\t\tthis._retry();\n\t\treturn true;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/net/WS.ts","import WS from './net/WS';\nimport Page from './components/Page';\nconsole.log(new WS('ws://localhost:8080'), new Page(null));\n\n\n// WEBPACK FOOTER //\n// ./src/public/Client.ts","import EventEmitter from '../event/EventEmitter';\n\nexport default class Node extends EventEmitter {\n\tpublic constructor(\n\t\tprivate _parent: Node | null\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic addNode(node: Node): void {\n\t\tnode._parent = this;\n\t}\n\n\tpublic addNodes(nodes: Node[]): void {\n\t\tfor (const node of nodes) {\n\t\t\tnode._parent = this;\n\t\t}\n\t}\n\n\tpublic fire(tag: string, ...args: any[]): void {\n\t\tif (this._parent !== null) {\n\t\t\tthis._parent._bubble(tag, ...args);\n\t\t}\n\t}\n\n\tprivate _bubble(tag: string, ...args: any[]): void {\n\t\tif (this.emit(tag, this, args)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._parent !== null) {\n\t\t\tthis._parent._bubble(tag, ...args);\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/components/Node.ts","module.exports = require(\"knockout-es5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"knockout-es5\"\n// module id = 26\n// module chunks = 1","export interface EventHandler {\n\t(self: any, event?: any): boolean\n}\n\ninterface EventHandlers {\n\t[tag: string]: EventHandler[]\n}\n\nexport default class EventEmitter {\n\tprivate readonly _handlers: EventHandlers\n\n\tpublic constructor(...tags: string[]) {\n\t\tthis._handlers = {};\n\t\tfor (const tag of tags) {\n\t\t\tthis._handlers[tag] = [];\n\t\t}\n\t}\n\n\tpublic on(tag: string, callback: EventHandler): this {\n\t\tif (this._handlers[tag].indexOf(callback) === -1) {\n\t\t\tthis._handlers[tag].unshift(callback);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic off(tag: string, callback: EventHandler): this {\n\t\tconst index = this._handlers[tag].indexOf(callback);\n\t\tif (index !== -1) {\n\t\t\tthis._handlers[tag].splice(index, 1);\n\t\t}\n\t\treturn this;\n\t}\n\n\tpublic emit(tag: string, sender: any, event: any = undefined): void {\n\t\tfor (const handler of this._handlers[tag]) {\n\t\t\tif (!handler(sender, event)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/event/EventEmitter.ts","import * as ko from 'knockout-es5';\nimport Node from './Node';\n\nexport type States = 'loading';\nexport namespace States {\n\texport const Loading = 'loading';\n}\n\nexport default class Page extends Node {\n\tpublic constructor(\n\t\t_parent: Node | null = null, // XXX implicit accesser ?!\n\t\tpublic display: any = { // XXX any\n\t\t\tactive: false\n\t\t},\n\t\tpublic icon: any = { // XXX\n\t\t\t'fa-refresh': false,\n\t\t\t'fa-spin': false\n\t\t}\n\t) {\n\t\tsuper(_parent);\n\t\tko.track(this.display);\n\t\tko.track(this.icon);\n\t}\n\n\tpublic activate(focused: boolean): void {\n\t\tthis.display.active(focused);\n\t}\n\n\tprotected _transition(state: States): void {\n\t\tfor (const key in this.icon) {\n\t\t\tthis.icon[key](false);\n\t\t}\n\t\tif (state === States.Loading) {\n\t\t\tthis.icon['fa-refresh'](true);\n\t\t\tthis.icon['fa-spin'](true);\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/components/Page.ts"],"sourceRoot":""}